\begin{lstlisting}[
  float,
  floatplacement=H,
  mathescape,
  captionpos=b,
  caption={Helper function to apply the motion $u_t$ to the particle set $\chi_{t-1}$, by sampling from the motion model.},
  label=lst:algorithmIntegrateMotion]
integrateMotion($\chi_{t-1}$, $u_t$) {

  $\bar{\chi}_t = \emptyset$

  for $m = 1$ to $M$ {
    $x^{[m]}_t$ = sample_motion_model($u_t$, $x^{[m]}_{t-1}$)
  }

  return $\bar{\chi}_t$
}chi\end{lstlisting}
