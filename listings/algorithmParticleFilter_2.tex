\begin{lstlisting}[
  float,
  floatplacement=H,
  mathescape,
  captionpos=b,
  caption={Part 2 of the solution's \texttt{particleFilter} function shown in Listing~\ref{lst:algorithmParticleFilter}.},
  label=lst:algorithmParticleFilter_2]
PART_2($\chi_{t-1}$) {

  $\bar{\chi}_t = \chi_{t-1}$

  // integrate remaining motions and filter with map
  while u_buffer isNotEmpty {
    $u$ = u_buffer.first
    $z = \emptyset$
    $\bar{\chi}_t$ = integrateMotion($\bar{\chi}_t$, $u$)
     u_buffer.remove($u$)

     // empty measurements
     $\bar{\chi}_t$ = filter($\bar{\chi}_t$, $z$, map)
  }

  return $\bar{\chi}_t$
}
\end{lstlisting}
